class Diagnosis < ApplicationRecord
  # 診断の選択肢を定義（定数として保持）
  QUESTION1_OPTIONS = ["リラックスしたい", "エネルギーを取り戻したい"].freeze
  QUESTION2_OPTIONS = ["短時間", "長時間"].freeze
  QUESTION3_OPTIONS = ["落ち込んでいる", "イライラしている", "頭が疲れている", "身体が疲れている"].freeze

  # バリデーション
  validates :question1, presence: true, inclusion: { in: QUESTION1_OPTIONS }
  validates :question2, presence: true, inclusion: { in: QUESTION2_OPTIONS }
  validates :question3, presence: true, inclusion: { in: QUESTION3_OPTIONS }
  validates :result, presence: true

  # 診断結果を決定するメソッド
  def self.determine_result(q1, q2, q3)
    case [q1, q2, q3]
    when ["リラックスしたい", "短時間", "落ち込んでいる"]
      "セロトニン活性化系（深呼吸・軽いストレッチ）"
    when ["リラックスしたい", "短時間", "イライラしている"]
      "セロトニン活性化系（温かい飲み物・瞑想）"
    when ["リラックスしたい", "短時間", "頭が疲れている"]
      "メラトニン活性化系（目を閉じてリラックス・アロマ）"
    when ["リラックスしたい", "短時間", "身体が疲れている"]
      "エンドルフィン活性化系（軽いストレッチ・マッサージ）"
    when ["リラックスしたい", "長時間", "落ち込んでいる"]
      "セロトニン活性化系（自然の中で過ごす・散歩）"
    when ["リラックスしたい", "長時間", "イライラしている"]
      "エンドルフィン活性化系（ジョギング・アート鑑賞）"
    when ["リラックスしたい", "長時間", "頭が疲れている"]
      "メラトニン活性化系（デジタルデトックス・読書）"
    when ["リラックスしたい", "長時間", "身体が疲れている"]
      "エンドルフィン活性化系（温泉・ヨガ）"
    when ["エネルギーを取り戻したい", "短時間", "落ち込んでいる"]
      "ドーパミン活性化系（音楽を聴く・新しいことを試す）"
    when ["エネルギーを取り戻したい", "短時間", "イライラしている"]
      "エンドルフィン活性化系（軽い運動・ダンス）"
    when ["エネルギーを取り戻したい", "短時間", "頭が疲れている"]
      "セロトニン活性化系（瞑想・日光浴）"
    when ["エネルギーを取り戻したい", "短時間", "身体が疲れている"]
      "エンドルフィン活性化系（ストレッチ・軽い運動）"
    when ["エネルギーを取り戻したい", "長時間", "落ち込んでいる"]
      "セロトニン活性化系（自然の中で過ごす・散歩）"
    when ["エネルギーを取り戻したい", "長時間", "イライラしている"]
      "エンドルフィン活性化系（ジョギング・アート鑑賞）"
    when ["エネルギーを取り戻したい", "長時間", "頭が疲れている"]
      "メラトニン活性化系（デジタルデトックス・読書）"
    when ["エネルギーを取り戻したい", "長時間", "身体が疲れている"]
      "エンドルフィン活性化系（温泉・ヨガ）"
    else
      "適切な診断結果が見つかりませんでした"
    end
  end
end
  